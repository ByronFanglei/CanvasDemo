<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
<!-- <script src="./promise.js"></script> -->
<script src='./promise_class.js'></script>
<script>

  // const promise = new Promise((resolve, reject) => {
  //   setTimeout(() => {
  //     // resolve(1)
  //     reject(2)
  //   }, 100)
  // })
  // promise.then(
  //   value => {
  //     console.log('成功1', value)
  //   },
  //   reason => {
  //     console.log('失败1', reason)
  //     // return 3
  //     // throw 4
  //     return new Promise((resolve, reject) => {
  //       reject(5)
  //     })
  //   }
  // ).then(
  //   value => {
  //     console.log('成功2', value)
  //   },
  //   reason => {
  //     console.log('失败2', reason)
  //     throw 4
  //   }
  // ).catch(reason => {
  //   console.log('catch', reason)
  //   return new Promise(() => {})
  // }).then(
  //   value => {
  //     console.log('成功3', value)
  //   },
  //   reason => {
  //     console.log('失败3', reason)
  //   }
  // )


  const p1 = Promise.resolve(2) // 如果接收一般值，promise成功，value就是这个值
  const p2 = Promise.resolve(Promise.resolve(3)) // 如果是一个成功的promise，promise成功，value就是promise的value
  const p3 = Promise.resolve(Promise.resolve(4)) // 如果是一个失败的promise，promise失败，reason就是promise的reason
  const p4 = new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve(5)
    })
  })

  // p1.then(value => {console.log('p1', value)})
  // p2.then(value => {console.log('p2', value)})
  // p3.catch(reason => {console.log('p3', reason)})


  const PAll = Promise.all([p4, p1, p2, p3])
  const PRace = Promise.race([p3, p4, p1, p2])

  // PAll.then(
  //   value => {
  //     console.log(value)
  //   },
  //   reason => {
  //     console.log(reason)
  //   }
  // )
  // PRace.then(
  //   value => {
  //     console.log(value)
  //   },
  //   reason => {
  //     console.log(reason)
  //   }
  // )

  const p5 = Promise.resolveDelay(66, 3000)
  const p6 = Promise.rejectDelay(77, 5000)

  
  p5.then(value => {
    console.log(value)
  })
  
  p6.catch(reason => {
    console.log(reason)
  })
</script>
</body>
</html>