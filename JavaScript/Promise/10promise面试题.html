<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>


  <script>
    // 第一道
    // setTimeout(() => {
    //   console.log(1)
    // }, 0)
    // Promise.resolve().then(() => {
    //   console.log(2)
    // })
    // Promise.resolve().then(() => {
    //   console.log(4)
    // })
    // console.log(3)
    // 3 2 4 1

    // 第二道
    // setTimeout(() => {
    //   console.log(1)
    // }, 0)
    // new Promise((resolve, reject) => {
    //   // 这里是同步的
    //   console.log(2)
    //   resolve()
    // }).then(() => {
    //   console.log(3)
    // }).then(() => {
    //   // 这里等console.log(3)执行后才能放到微任务里
    //   console.log(4)
    // })
    // console.log(5)
    // 2 5 3 4 1

    // 第三道
    // const frist = () => (
    //   new Promise((resolve, reject) => {
    //     console.log(3) // 同步
    //     let p = new Promise((resolve, reject) => {
    //       console.log(7) // 同步
    //       setTimeout(() => {
    //         console.log(5)
    //         resolve(6)
    //       }, 0)
    //       resolve(1)
    //     })
    //     resolve(2)
    //     p.then((value) => {
    //       console.log(value)
    //     })
    //   })
    // )

    // frist().then((value) => {
    //   console.log(value)
    // })
    // console.log(4) // 同步
    // 3 7 4 1 2 5

    // 第四道
    // setTimeout(() => {
    //   console.log(0)
    // }, 0)

    // new Promise((resolve, reject) => {
    //   console.log(1) // 同步
    //   resolve()
    // }).then(() => {
    //   console.log(2)
    //   new Promise((resolve, reject) => {
    //     console.log(3) // 同步
    //     resolve()
    //   }).then(() => {
    //     console.log(4)
    //   }).then(() => {
    //     console.log(5)
    //   })
    // }).then(() => {
    //   console.log(6)
    // })

    // new Promise((resolve, reject) => {
    //   console.log(7) // 同步
    //   resolve()
    // }).then(() => {
    //   console.log(8)
    // })

    // 第五题
    async function async1() {
      console.log('async1 start') // 2
      await async2();
      console.log('async1 end') // 6
    }

    async function async2() {
      console.log('async2') // 3
    }

    console.log('script start') // 1

    setTimeout(function () {
      console.log('setTimeout') // 8
    }, 0);

    async1();

    new Promise(function (resolve) {
      console.log('promise1') // 4
      resolve()
    }).then(function () {
      console.log('promise2') // 7
    });

    console.log('script end') // 5

    // 第六题
    // async function testSometing() {
    //   console.log("执行testSometing"); // 2
    //   return "testSometing";
    // }

    // async function testAsync() {
    //   console.log("执行testAsync"); // 6
    //   return Promise.resolve("hello async");
    // }

    // async function test() {
    //   console.log("test start..."); // 1
    //   const v1 = await testSometing();
    //   console.log(v1); // 5 testSometing
    //   const v2 = await testAsync();
    //   console.log(v2); // 8
    //   console.log(v1, v2); // 9
    // }

    // test();

    // var promise = new Promise((resolve) => {
    //   console.log("promise start.."); // 3
    //   resolve("promise");
    // });

    // promise.then((val) => {
    //   console.log(val) // 7 promise
    // });

    // console.log("test end...") // 4
  </script>
</body>

</html>