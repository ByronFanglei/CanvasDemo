<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
<script>

  /*
  1、async 函数
    async函数的返回值为promise对象
    promise对象的结果由async函数执行的返回值决定
    只能返回成功的promise对象，如果是失败的promise对象需要实用try...catch进行捕获
  2、await 表达式
    await右侧的表达式一般为promise对象，但也可以是其他的值，
    如果表达式为promise对象，await返回值是promise成功的值,在此期间它会阻塞，延迟执行await语句后面的语句
    如果表达式是其他值，直接将此值作为await的返回值
  3、注意：
    await必须写在async函数中，但是async函数中可以没有await
    如果await的promise失败了，就会抛出异常，需要通过try...catch来捕获处理
  */
  
  // async function fn1 () {
  //   // throw 1
  //   // return 2
  //   // return Promise.resolve(3)
  //   // return Promise.reject(4)
  //   return new Promise((resolve, reject) => {
  //     setTimeout(() => {
  //       resolve(5)
  //     }, 1000)
  //   })
  // }
  // const result = fn1()
  // result.then(
  //   value => {
  //     console.log('成功', value)
  //   },
  //   reason => {
  //     console.log('失败', reason)
  //   }
  // )


  function fn2 () {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        console.log('123')
        resolve(1)
      }, 1000)
    }) 
  }

  async function fn4 () {
    console.log('123')
    return 1
  }

  async function fn3 () {
    try {
      console.log('开始async');
      const result = await fn2 ()
      console.log('结束async');
      console.log(result)
    } catch (error) {
      console.log(error)
    }

  }

  fn3 ()
</script> 
</body>
</html>