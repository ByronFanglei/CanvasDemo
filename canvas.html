<!DOCTYPE html>
<html>
<head>
	<title>canvas</title>
	<meta charset="utf-8">
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		.canvas{
			border:1px #000 solid;
			background-color: #000;
		}


	</style>
	<script type="text/javascript" src="js/underscore.js"></script>
</head>
<body>
	<canvas width="500px" height="500px" class="canvas">您的浏览器不支持canvas，请更换浏览器</canvas>


	<script>
		// var huaban = document.querySelector('.canvas');
		// var bicaso = huaban.getContext('2d');
		// bicaso.fillStyle = '#ff6700';
		// var timer = null;
		// var xsplte = 10;
		// var ls = 1; //1往右  -1往左
		// timer = setInterval(function(){
		// 	// console.log(1);
		// 	if (xsplte==0) {
		// 		ls = 1;
		// 	}else if (xsplte==450) {
		// 		ls = -1;
		// 	}
		// 	switch(ls){
		// 		case 1:{
		// 			bicaso.clearRect(0,0,500,500);
		// 			bicaso.fillRect(++xsplte,++xsplte,50,50);
		// 		}break;
		// 		case -1:{
		// 			bicaso.clearRect(0,0,500,500);
		// 			bicaso.fillRect(--xsplte,--xsplte,50,50);
		// 		}break;
		// 	}
		// 	// console.log(xsplte);
		// },30)
		


		var huaban = document.querySelector('.canvas');
		var bicaso = huaban.getContext('2d');
		var BallArr = []; //小球函数
		// huaban.style.width = document.body.clientWidth + 'px';
		// huaban.style.height = document.body.clientHeight + 'px';
		// 创建小球类
		function Ball(x,y){
			this.x = x;
			this.y = y;
			this.c = _.sample(['#DC143C','#1E90FF','#00FF7F','#F0E68C','#FFA500']);
			this.r = _.random(5,10);
			this.dx = _.random(-4,4);
			this.dy = _.random(-4,4);
			BallArr.push(this); // 将小球存入数组中
		}
		// 当小球半径小于0时 将小球在数组中移除
		Ball.prototype.remball = function(){
			this.x += this.dx;
			this.y += this.dy;
			this.r -= 0.5;
			if (this.r<0) {
				_.without(BallArr,this);
			}
		}
		// 画小球方法
		Ball.prototype.drewball = function(){
			if (this.r<0) {
				return;
			}
			bicaso.beginPath();
			bicaso.arc(this.x,this.y,this.r,0*Math.PI,2*Math.PI);
			bicaso.fillStyle = this.c;
			bicaso.fill();
			bicaso.closePath();
		}

		// 小球移动
		huaban.onmousemove = function(){
			new Ball(event.offsetX,event.offsetY);
			// console.log(event.offsetX+":"+event.offsetY);
		}

		// 开始动画
		var timer = setInterval(function(){
			// 清屏
			bicaso.clearRect(0,0,huaban.scrollWidth,huaban.scrollHeight);
			// 开始画小球
			_.each(BallArr,function(element){
				element.remball();
				element.drewball();
			})
		},50)
	</script>
</body>
</html>