<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>function</title>
</head>

<body>
  <ul id="list">
    <li class="li">1</li>
    <li class="li">2</li>
    <li class="li">3</li>
  </ul>

  <script>
    // 第一道
    // function fn() {
    //   this.user = 'hello world';
    //   return 1
    //   // return {}
    // }
    // var a = new fn()
    // console.log(a.user)
    // console.log(a)

    // 第二道
    // var o = {
    //   a: 10,
    //   b: {
    //     a: 12,
    //     fn: function () {
    //       console.log(this.a)
    //       console.log(this)
    //     }
    //   }
    // }

    // var j = o.b.fn
    // j()
    // o.b.fn()

    // 第三道：实现add(2,3,4) = 9, add()(2)(3)(4) = 9
    // function add(...n) {
    //   let nn = n.reduce((a, b) => a + b)
    //   var temp = function(...m) {
    //     let mm = m.reduce((a, b) => a + b)
    //     return add(mm + nn)
    //   }
    //   temp.toString = function() {
    //     return nn
    //   }
    //   return temp
    // }

    // console.log(add(3)(4)(5))
    // console.log(add(2,3,4)(1,2,3)(1,2))

    // 第四道：数组合并并展开
    // 输入：[['a','b'],['n','m'],['0','1']] 
    // 输出：['an0','an1','am0','am1','bn0','bn1','bm0','bm1']
    // let arr = [['a','b','c'],['n','m'],['0','1','2','3']]
    // function arrflat (arr) {
    //   let len = arr.length
    //   let result = Array(len)
    //   let flag = []

    //   function deep(res, len, index, result) {
    //     if (index === len) {
    //       console.log(result)
    //       flag.push(result.join(''))
    //       return
    //     }
    //     for(let i = 0; i < arr[index].length; i++) {
    //       result[index] = res[index][i]
    //       deep(res, len, index+1, result)
    //     }
    //   }

    //   deep(arr, len, 0, result)
    //   console.log(flag)

    // }
    // arrflat(arr)

    // 第五题：用数组模拟一个栈，每次获取栈内最小元素的时间复杂度位o(1)
    // let arr = []
    // function arrshift(arr, num) {
    //   if (!arr) {
    //     if (num > arr[0]) {
    //       [num, arr[0]] = [arr[0], num]
    //       arr.unshift(num)
    //     }
    //   } else {
    //     arr.unshift(num)
    //   }
    //   return arr[0]
    // }

    // console.log(arrshift(arr, 2))
    // console.log(arrshift(arr, 1))

    // 第六题：二位数组斜切45度遍历
    // let arr = [
    //   1, 1, 2, 3, 1, 2, 3]
    //   4, 4, 5, 6, 4, 5, 6]
    //   7, 7, 8, 9, 7, 8, 9]
    //   7, 7, 8, 9, 7, 8, 9]
    //   7, 7, 8, 9, 7, 8, 9]
    // ]
    // let arr = [
    //   [1, 2, 3],
    //   [4, 5, 6],
    //   [7, 8, 9],
    //   [7, 8, 9],
    //   [7, 8, 9],
    // ]
    // function hypotenuse(arr) {
    //   for (let i = j = arr.length - 1,index=0; i > (-arr.length+arr[0].length-1); i--,index=0) {
    //     console.log(i, j)
    //     if(arr[0].length>= j){
    //       while(1){
    //       }
    //     }
    //   }

    // }
    // console.log(hypotenuse(arr))

    // 第六题：编写一个函数，计算每个元素出现的次数，返回一个对象
    // let arr = ['a', 'b', 'a', 'c', 'a', 'b', 'd']
    // function fun (arr) {
    //   let obj = {}
    //   let map = new Map()
    //   for (let key of arr) {
    //     if (map.has(key)) {
    //       map.set(key, map.get(key) + 1)
    //     } else {
    //       map.set(key, 1)
    //     }
    //   }
    //   for (let [key, val] of map) {
    //     obj[key] = val
    //   }
    //   console.log(obj)
    // }
    // fun(arr)

    // 第六题：点击每个li后alert下标
    // function bindlist(elem, type, select, fun) {
    //   if (fun == null) {
    //     fun = select
    //     select = null
    //   }
    //   let arr = Array.from(elem.children)
    //   elem.addEventListener(type, event => {
    //     if (select) {
    //       if (event.target.matches(select)) {
    //         // console.log()
    //         let index = arr.findIndex(e => e === event.target)
    //         fun.call(elem, event, index)
    //       }
    //     } else {
    //       // 普通绑定
    //       fun.call(elem, event)
    //     }
    //   })
    // }
    // bindlist(list, 'click', 'li', (e, index) => {
    //   console.log(index)
    // })

    // 第七题：
    function log(msg, time) {
      return new Promise((resolve) => {
        setTimeout(() => {
          console.log(msg)
          resolve()
        }, time)
      })
    }
    //下面三段代码分别输出什么
    // (async () => {
    //   for (let i = 0; i < 5; i++) {
    //     await log(i, 1000)
    //   }
    // })() // 每秒输入一个数字yi

    // (async () => {
    //   [1,2,3,4].forEach(async (i) => {
    //     await log(i, 1000)
    //   })
    // })() // 一秒后直接输入全部数字

    // (async () => {
    //   for (const i of [1,2,3,4]) {
    //     await log(i, 1000)
    //   }
    // })() // 每秒输入一个数字

    // 第八题：数组去重
    let arr = [10, 20, 20, 20, 30, 30, 40, 40, 40, 50]
    // 结果： [10,20,30,40,50]
    // let arr = [10,10,10,10,10,10,10,10,10,10,10,10 ]
    // let arr = [10, 20]
    // let arr = [10]
    function c(arr) {
      if (arr.length <= 1) return arr
      let index = 0
      let lax = 1

      while (lax < arr.length) {
        if (arr[index] === arr[lax]) {
          lax++
        } else {
          arr[index + 1] = arr[lax]
          index++
          lax++
        }
      }
      console.log(index)
      return arr.slice(0, index+1)
    }
    // console.log(c(arr))

    function cc(arr) {
      if (arr.length <= 1) return arr
      let idx = 0
      for (let i = 1; i < arr.length;) {
        if (arr[idx] === arr[i]) {
          i++
        } else {
          arr[idx + 1] = arr[i]
          idx++
          i++
        }
      }
      return arr.slice(0, idx+1)
    }

    // console.log(cc(arr))

    // 第九题
    // var test = (function(a) {
    //   this.a = a
    //   return function(b){
    //     return this.a + b
    //   }
    // })(function(a,b) {
    //   return a
    // }(1,2))
    // console.info(test(4))
    // console.info(test(10))

  </script>
</body>

</html>